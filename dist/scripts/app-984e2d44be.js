function svgBuilder(){function t(t,a,e){return r=t,n=d3.select(r).append("svg").attr("width",e).attr("height",a)}function a(){return n}function e(){return r}var n=null,r=null;return{build:t,getSvg:a,getChartId:e}}!function(){"use strict";angular.module("BarChartDemo",[]),angular.module("chartTopperDemo",["ngAnimate","BarChartDemo","ngCookies","ngTouch","ngSanitize","ui.router","ui.bootstrap"])}(),function(){"use strict";function t(){function t(t){var a=d3.svg.line().interpolate("monotone").x(function(a){return t.xScale(a.month)}).y(function(a){return t.yScale(a.score)}),e=d3.svg.line().interpolate("monotone").x(function(a){return t.xScale(a.month)}).y(function(a){return t.yScale(a.score)});if(t.animation&&"fade-in"===t.animation)return void t.svg.append("path").attr("fill","none").attr("stroke",t.fillColor).attr("stroke-width",0).attr("class","line").attr("d",e(t.data)).transition().ease("linear").delay(1e3).duration(1e3).attr("d",a(t.data)).attr("stroke-width",1.5);var n=t.svg.append("path").attr("fill","none").attr("stroke",t.fillColor).attr("stroke-width",1.5).attr("d",a(t.data));if(t.animation&&"ghost-writer"===t.animation){var r=n.node().getTotalLength();n.attr("stroke-dasharray",r+" "+r).attr("stroke-dashoffset",r).transition().duration(2e3).ease("linear").attr("stroke-dashoffset",0)}}return{visit:t}}angular.module("chartTopperDemo").service("lineDrawerVisitor",t)}(),function(){function t(){function t(t){t.svg.append("g").selectAll("circle.median").data(t.data).enter().append("circle").attr("r",4).attr("cx",function(a){return t.xScale(a.month)}).attr("cy",function(a){return t.yScale(a.score)}).style("fill",t.fillColor).append("text").text("test text").attr("text-anchor","top")}return{visit:t}}angular.module("chartTopperDemo").service("circleDrawerVisitor",t)}(),function(){function t(){function t(t){var e=d3.svg.axis().scale(t.yScale).orient("right").tickValues(a).tickSize(-t.height+65),n=d3.svg.axis().scale(t.xScale).orient("bottom").tickSize(-t.width+55).tickFormat(function(a){var e=t.data[a-1];return e?e.monthText:""});t.svg.append("g").attr("id","xAxisG").attr("transform","translate(0, 540)").call(n),t.svg.append("g").attr("id","yAxisG").attr("transform","translate(530, 0)").call(e)}return{visit:t}}angular.module("chartTopperDemo").service("axisDrawerVisitor",t);var a=[10,20,30,40,50,60,70,80,90,100]}(),function(){function t(){function t(t){var a=Math.min(t.height,t.width)/2,e=t.svg.append("g").attr("transform","translate("+a+","+a+")");e.append("text").attr("dy",".35em").attr("text-anchor","middle").text(t.title)}return{visit:t}}angular.module("chartTopperDemo").service("TitleVisitor",t)}(),function(){function t(){function t(t){function a(t){var a={startAngle:0,endAngle:0},e=d3.interpolate(a,t);return function(t){return r(e(t))}}var e=d3.scale.category20(),n=Math.min(t.width,t.height)/2,r=d3.svg.arc().innerRadius(n/2).outerRadius(n),i=d3.layout.pie(),o=Math.min(t.height,t.width)/2,l=t.svg.append("g").attr("transform","translate("+o+","+o+")");l.selectAll("path").data(i(t.data)).enter().append("path").attr("stroke","white").attr("stroke-width",.5).attr("fill",function(t,a){return e(a)}).transition().duration(1e3).delay(1e3).attrTween("d",a),l.selectAll("text").data(i(t.data)).enter().append("text").attr("transform",function(t){var a=r.centroid(t);return"translate("+a[0]+","+a[1]+")"}).transition().delay(2100).attr("text-anchor","middle").text(function(t){return t.value})}return{visit:t}}angular.module("chartTopperDemo").service("ArcVisitor",t)}(),function(){function t(){function t(t){var a=d3.svg.axis().scale(t.y).orient("left");t.svg.append("g").call(a)}return{visit:t}}angular.module("chartTopperDemo").service("yAxisVisitor",t)}(),function(){function t(){function t(t){var a=d3.svg.axis().scale(t.x).orient("bottom");t.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+t.height+")").call(a)}return{visit:t}}angular.module("chartTopperDemo").service("xAxisVisitor",t)}(),function(){function t(){function t(t,a){switch(t.dataTextPosition){case"middle":return t.y(a.data)+(t.height-t.y(a.data))/2;case"top":return t.y(a.data)+r;default:return t.y(a.data)+i}}function a(t,a){a.data(t.data).enter().append("rect").attr("class","bar").attr("x",function(a){return t.x(a.label)}).attr("width",t.x.rangeBand()).attr("fill",t.fillColor).attr("height",0).attr("y",function(a){return t.y(a.data)+(t.height-t.y(a.data))}).transition().duration(1e3).attr("height",function(a){return t.height-t.y(a.data)}).attr("y",function(a){return t.y(a.data)})}function e(a,e){e.data(a.data).enter().append("text").transition().delay(1200).attr("x",function(t){return a.x(t.label)+a.x.rangeBand()/2}).attr("class","bar-text").attr("y",function(e){return t(a,e)}).attr("text-anchor","middle").text(function(t){return t.data})}function n(t){var n=t.svg.selectAll(".bar");a(t,n),e(t,n)}var r=25,i=-5;return{visit:n}}angular.module("chartTopperDemo").service("barVisitor",t)}(),function(){function t(t,a,e){function n(t,a,e,n){return new r(t,a,e,n)}function r(n,r,l,s){this.lineChart=l,this.element=r,this.data=n,this.xScale=null,this.yScale=null,this.svg=null,this.fillColor=null===s?i:s,this.height=575,this.width=575,this.animate=function(t){return void 0===this.animation&&(this.animation=t),this},this.build=function(){_.each(this.data,function(t,a){var e={score:t};_.extend(o[a],e)}),this.data=o,this.xScale=d3.scale.linear().domain([1,13]).range([20,this.width-45]),this.yScale=d3.scale.linear().domain([0,100]).range([this.height-35,20]),this.svg=d3.select(this.element).append("svg").attr("width",this.width).attr("height",this.height),e.visit(this),a.visit(this),this.lineChart&&t.visit(this)}}var i="steelblue",o=[{month:"1",monthText:"Jan"},{month:"2",monthText:"Feb"},{month:"3",monthText:"Mar"},{month:"4",monthText:"Apr"},{month:"5",monthText:"May"},{month:"6",monthText:"Jun"},{month:"7",monthText:"Jul"},{month:"8",monthText:"Aug"},{month:"9",monthText:"Sep"},{month:"10",monthText:"Oct"},{month:"11",monthText:"Nov"},{month:"12",monthText:"Dec"}];return{createLineChart:n}}angular.module("chartTopperDemo").service("lineChartService",t),t.$inject=["lineDrawerVisitor","circleDrawerVisitor","axisDrawerVisitor"]}(),function(){function t(t,a){function e(t,a,e,r,i){return new n(t,a,e,r,i)}function n(e,n,r,i,o){this.data=e,this.element=n,this.height=r,this.width=i,this.title=o,this.svg=null,this.build=function(){this.svg=d3.select(n).append("svg").attr("width",i).attr("height",r),t.visit(this),a.visit(this)}}return{createDonut:e}}angular.module("chartTopperDemo").service("donutService",t),t.$inject=["ArcVisitor","TitleVisitor"]}(),function(){function t(t,a,e){function n(n,i,o,l,s){this.x=null,this.y=null,this.animation=null,this.data=n,this.element=i,this.margin={left:50+s,right:50+s,top:50+s,bottom:50+s},this.svg=null,this.height=null,this.width=null,this.fillColor=null,this.dataTextPosition=null,this.animate=function(t){return null===this.animation&&(this.animation=t),this},this.color=function(t){return this.fillColor=t,this},this.dataPosition=function(t){return this.dataTextPosition=t,this},this.build=function(){null===this.fillColor?this.fillColor=r:angular.noop,this.width=l-this.margin.left-this.margin.right,this.height=o-this.margin.top-this.margin.bottom,this.x=d3.scale.ordinal().rangeRoundBands([0,this.width],.3),this.y=d3.scale.linear().range([this.height,0]),this.svg=d3.select(i).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.x.domain(n.map(function(t){return null===t.label?"":t.label})),this.y.domain([0,d3.max(n,function(t){return t.data})]),a.visit(this),t.visit(this),e.visit(this)}}var r="steelblue";return{createBarChart:function(t,a,e,r,i){return new n(t,a,e,r,i)}}}angular.module("chartTopperDemo").service("barChartService",t),t.$inject=["yAxisVisitor","xAxisVisitor","barVisitor"]}(),angular.module("chartTopperDemo").service("svgBuilder",svgBuilder),function(){function t(){function t(a,e){function n(t){r("outside"===t?1.5:1)}function r(t){a.enterAndAppend("text").attr("transform",function(a){var n=e.getCenterCoordinates(a);return"translate("+n[0]*t+","+n[1]*t+")"}).attr("text-anchor","middle").text(function(t){return t.value})}t.prototype.addDataLabels=function(t){n(t)}}return{createLabelBuilder:function(a,e){return new t(a,e)}}}angular.module("chartTopperDemo").service("donutLabelBuilder",t)}(),function(){function t(){function t(a,e,n){t.prototype.enterAndAppend=function(t){return n.selectAll(t).data(e(a)).enter().append(t)}}return{createVisitor:function(a,e,n){return new t(a,e,n)}}}angular.module("chartTopperDemo").service("elementVisitor",t)}(),function(){"use strict";function t(t,a,e,n){function r(r,i,l,s){var c=t.build(i,l,s).append("g").attr("transform","translate("+Math.min(s,l)/2+","+Math.min(s,l)/2+")"),u=e.createVisitor(r,o,c),d=a.createArc(l,s),h=n.createLabelBuilder(u,d);u.enterAndAppend("path").attr("stroke","white").attr("stroke-width",.5).attr("fill",function(t,a){return d.color(a)}).attr("d",d.arc),h.addDataLabels("center"),c.append("text").attr("dy",".35em").attr("text-anchor","middle").text("Test Text")}function i(t,a,e,n){}var o=d3.layout.pie();return{build:r,create:i}}angular.module("chartTopperDemo").service("donutChart",t),t.$inject=["svgBuilder","arcBuilder","elementVisitor","donutLabelBuilder"]}(),function(){function t(){function t(t,a){this.radius=Math.min(a,t)/2,this.color=d3.scale.category20(),this.arc=d3.svg.arc().innerRadius(this.radius/2).outerRadius(this.radius)}return t.prototype.getCenterCoordinates=function(t){return this.arc.centroid(t)},{createArc:function(a,e){return new t(a,e)}}}angular.module("chartTopperDemo").service("arcBuilder",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/components/navbar/navbar.html"};return t}angular.module("chartTopperDemo").directive("acmeNavbar",t)}(),function(){"use strict";function t(t,a,e){function n(t,a,n,r,i){return e.createBarChart(t,a,n,r,i)}function r(t,e){a.createLineChart(t,e,!0,"steelblue").animate("ghost-writer").build()}function i(a,e){t.createDonut(a,e,250,250,"Donut Title").build()}return{buildBarChart:n,buildLineChart:r,buildDonutChart:i}}angular.module("chartTopperDemo").service("chartTopper",t),t.$inject=["donutService","lineChartService","barChartService"]}(),function(){"use strict";function t(t){var a=[5,10,15,20,25],e=["45","55","62","35","45","71","78","65","41","93","81","87"],n="#d3-test",r="#d3-line-test",i="#d3-donut-test";t.buildBarChart(a,n),t.buildLineChart(e,r),t.buildDonutChart(a,i,250,250)}angular.module("chartTopperDemo").controller("MainController",t),t.$inject=["chartTopper"]}(),function(){function t(t,a){var e=this;e.labelPlacement="top";var n=[{label:"MON",data:20},{label:"TUES",data:100},{label:"WED",data:150},{label:"THUR",data:121},{label:"FRI",data:80},{label:"SAT",data:65},{label:"SUN",data:48}];e.config={animation:!0,labelPlacement:"middle"},e.color="steelblue",t.buildBarChart(n,"#bar-chart-demo",600,800,10).animate("ghost-writer").color(e.color).dataPosition(e.config.labelPlacement).build(),e.update=function(){angular.element("#bar-chart-demo").empty(),t.buildBarChart(n,"#bar-chart-demo",600,800,10).color(e.color).dataPosition(e.config.labelPlacement).build()},a.$watch(angular.bind(this,function(){return this.config}),function(){e.update()},!0)}angular.module("BarChartDemo").controller("BarChartDemoController",t),t.$inject=["chartTopper","$scope"]}(),function(){"use strict";function t(t){t.debug("runBlock end")}angular.module("chartTopperDemo").run(t),t.$inject=["$log"]}(),function(){"use strict";function t(t,a){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("bar",{url:"/bar",templateUrl:"app/BarChartDemo/BarChartDemo.html",controller:"BarChartDemoController",controllerAs:"BarChart"}),a.otherwise("/")}angular.module("chartTopperDemo").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("chartTopperDemo").constant("malarkey",malarkey).constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function t(t,a){t.debugEnabled(!0),a.options.timeOut=3e3,a.options.positionClass="toast-top-right",a.options.preventDuplicates=!0,a.options.progressBar=!0}angular.module("chartTopperDemo").config(t),t.$inject=["$logProvider","toastr"]}(),angular.module("chartTopperDemo").run(["$templateCache",function(t){t.put("app/BarChartDemo/BarChartDemo.html",'<section><div class="container"><div><acme-navbar creationdate="main.creationDate"></acme-navbar></div><h1 class="text-center">Bar Chart Demo - Fake Weekly Sales Data!</h1><div class="row"><div class="col-md-4 text-center"><h4>Bar Chart Animation</h4><div class="btn-group"><label class="btn btn-primary" ng-model="BarChart.config.animation" btn-radio="true">On</label> <label class="btn btn-primary" ng-model="BarChart.config.animation" btn-radio="false">Off</label></div></div><div class="col-md-4 text-center"><h4>Label Positioning</h4><div class="btn-group"><label class="btn btn-success" ng-model="BarChart.config.labelPlacement" btn-radio="\'outside\'">Outside Label</label> <label class="btn btn-success" ng-model="BarChart.config.labelPlacement" btn-radio="\'top\'">Align Top</label> <label class="btn btn-success" ng-model="BarChart.config.labelPlacement" btn-radio="\'middle\'">Align Middle</label></div></div><div class="col-md-4"><h4>Enter Bar Color (hex, rgb, or color)</h4><div class="btn-group"><input type="text" class="form-control" ng-blur="BarChart.update()" ng-model="BarChart.color"></div></div></div><div class="row"><div class="chart-container"><div id="bar-chart-demo"></div></div></div></div></section>'),t.put("app/main/main.html",'<style>\n\n    #d3-line-test rect {\n        fill: steelblue;\n    }\n\n    #d3-line-test  text {\n        fill: gray;\n        font: 10px sans-serif;\n        text-anchor: end;\n    }\n\n</style><div class="container"><div><acme-navbar creationdate="main.creationDate"></acme-navbar></div><div class="jumbotron text-center"><div class="row"><div class="col-lg-12"><h3>Test div that will hold my Line svg</h3><div class="col-lg-12"><div id="d3-line-test"></div></div></div><div class="col-lg-12"><h3>Test div that will hold my Donut svg</h3></div></div><div class="row"><div class="col-lg-12"><div id="d3-donut-test"></div></div></div></div></div>'),t.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="#"><span class="glyphicon glyphicon-home"></span></a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="/#bar">Bar Chart Example</a></li><li><a ng-href="/#line">Line Chart Example</a></li><li><a ng-href="/#donut">Donut Chart Example</a></li></ul></div></div></nav>')}]);